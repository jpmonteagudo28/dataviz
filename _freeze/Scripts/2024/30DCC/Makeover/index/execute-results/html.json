{
  "hash": "28157675fd7e8aa8c586c34d63a21f79",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Remake of visual representation of statistical data graphed in 1644 by Michael van Langren\"\ndescription: \"30 DayChart Challenge 2024 Makeover day\"\nformat:\n  html:\n    css: styles.css\n    code-fold: false\n    code-tools: false\n    code-line-numbers: false\ndoi: 10.59350/bje88-8r592\ncitation: true\ndraft: false\n---\n\n\n\n\n\nThe goal is to recreate this image using `R` and `ggplot2`.\n\n<img src=\"/files/cards/1644.jpg\" alt=\"Michael Florent van Langren, 1644\" height=\"200\" width=\"800\"/>\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(here)                          \nlibrary(tidyverse)                     \nlibrary(ggtext)                        \nlibrary(showtext)                      \nlibrary(ragg)                          \n\n\nbase_path <- here::here(\"2024\",\"img\")\n\n# ------------------------------------ ##\n# Setting fonts\nfont_add_google(\"Vollkorn SC\", \"volk\")\n# font_add_google(\"Sedan\", \"sedan\") not loading the font\nfont_add_google(\"Faustina\",\"faustina\")\nfont_add_google(\"Averia Serif Libre\", \"averia\")\nfont_add_google(\"Alegreya\", \"alegre\")\nshowtext_auto()\n\n# Testing fonts\ntib <- tibble(family = c('volk','faustina','averia','alegre'),\n  x = 0,y = seq(0.0, 1, length.out = 4),\n  label = 'Toledo. Grados de Longitud 10,20,30')\ntib %>%\n  ggplot(aes(x, y, label = label)) +\n  geom_text(family = tib$family, size = 13, hjust = 0, col = 'dodgerblue4') +\n  coord_cartesian(xlim = c(0, 1), ylim = c(0, 1)) +\n  theme_void()\n\n# Choosing title and body font\nbody_font <- \"alegre\"\ntitle_font <- \"volk\"\n#-------------------------------------- ##\n# Creating ticks, labels, and markers\n\nminor <- tibble(x = 0:30, # minor ticks\n                ymax = 1,\n                ymin = .87)\n\n\nmajor <- tibble(x = seq(0,30,5), # major ticks\n                ymax = 1,\n                ymin = .75)\n\n\nv_ticks <- tibble(x = c(0,10,20,30), # vertical ticks\n                  y = .745) |>\n  mutate(xmin = x - .21, xmax = x + .21) # longer to account for labels\n\n\nx_labs <- tibble(x = c(9.5,19.5,29.5), # setting num. on numberline\n                 y = .8,\n                 lab = c(\"<span style ='font-size:23pt;'>10</span>\",\n                         \"<span style ='font-size:23pt;'>20</span>\",\n                         \"<span style ='font-size:23pt;'>30</span>\")\n                 )\n\n\nzero_labs <- tibble(x = 0, #setting labels in Vollkorn SC\n              y = 1.31,\n              lab = (\"<b style='font-size:32pt;'>toledo.</b>\"))\n\n\nv_labs <- tibble( # setting labels in Alegreya\n  x = c(17.6,19.55,20.60,21.21,21.8,25.3,26,26.78,27.52,28.21,29.65,30.01),\n  y= 1.31,\n  lab = c(\"<i> G. Ianfonius</i>\",\"<i>G. Mercator\", \n          \"<i>I. Schonerus.</i>\", \"<i>P. Lantsbergius.</i>\", \"<i>T. Brabz.</i>\", \n          \"<i>I. Regiomontanus.</i>\", \"<i>Orontius.</i>\", \"<i>C. Clavius.</i>\", \n          \"<i>C. Ptolomaus.</i>\", \"<i>A. Argelius.</i>\", \"<i>A. Maginus.</i>\",\n          \"<i>D. Origanus.</i>\")\n  )\n\n\ncircle_markers <- tibble(\n  x = c(0,17.65,19.55,20.85,21.12,21.43,25.5,26,26.52,27.74,28,29.7,30.015),\n  y = 1.35\n)\n\nh_labs <- tibble( # setting labels in Vollkorn SC\n  x = c(4.5,7.75,9.45,13.065,23.5),\n  y = c(1.60,1.60,1.60,1.60,1.10),\n  lab = c(\"<span style='font-size:27pt;'>Grados</span>\",\"<span style='font-size:27pt;'>de</span>\",\n          \"<span style='font-size:27pt;'>la</span>\",\"<span style='font-size:27pt;'>Longitud.</span>\",\n          \"ROMA\")\n)\n\n# Creating caption text\ncpt <- (\"Twelve known estimates in longitude bewteen Toledo & Rome.<br> Replica of one of the first visual representations of data by Michael Florent Van Langren, \n         drawn in 1644.<span style='font-size:15pt;'><br><br><i> Created in R with ggplot2&nbsp;by JP Monteagudo</i> | <i>Inspired by Cédric Scherer.</i></span>\")\n\n# Create plot with specified ticks, markers, and labels\n\nggplot() + \n  # Creating minor, major, and vertical ticks\n  geom_linerange(aes(xmin = -.24,xmax = 30.05,y =1), linewidth = 1.4) +\n  geom_linerange(data = minor, aes(x = x,ymin = ymin, ymax = ymax), linewidth = 1.4) +\n  geom_linerange(data  = major, aes(x = x, ymin = ymin, ymax = ymax), linewidth = 1.6) +\n  geom_linerange(data = v_ticks, aes(xmin = xmin, xmax = xmax, y = y),linewidth = 1.4) +\n  # Setting markers in place (4 figures to create pointer)\n  geom_point(data = circle_markers, aes(x,y = 1.16),shape =\"|\", size = 4.5,\n             stroke = 4) +\n  geom_point(data = circle_markers, aes(x,y = 1.10), shape = 22, size = 2.5,\n             stroke = 1.5, fill =\"white\") +\n  geom_point(data = circle_markers, aes(x,y = 1.06), shape = 21, size = 4.5,\n             stroke = 1.5, fill = \"white\") +\n  geom_point(data = circle_markers, aes(x, y = 1.06), size = .5) +\n  # Adding label text\n  geom_richtext(data = x_labs, aes(x,y, label = lab), size = 6, family = body_font,\n                fill = NA, label.colour = NA) +\n  geom_text(data = h_labs[5,],aes(x,y, label = lab), size = 10, family = title_font,\n            fontface = \"bold\") +\n  geom_richtext(data = h_labs[1:4,],aes(x,y,label = lab), size = 14, family = title_font,\n                fontface = \"bold\",fill = NA, label.colour = NA) +\n  geom_richtext(data = zero_labs, aes(x,y,label = lab), angle = 90, hjust = 0, size = 6,\n                family = title_font, fontface = \"bold\",fill = NA, label.colour = NA) +\n  geom_richtext(data = v_labs, aes(x,y, label = lab),angle = 90, hjust = 0, size = 6,\n                family = body_font, fontface = \"bold\", fill = NA, label.colour = NA) +\n  scale_x_continuous(expand = c(.03,.03)) +\n  scale_y_continuous(limits = c(.4,3.4), expand = c(0,0)) +\n  theme_void() + # update to theme_gray to figure out the letter–spacing, markers dist, and height.\n  theme(        # it took me at least 32 attempts to get spacing right\n    plot.background = element_rect(fill = \"#f9f9f9\", colour = NULL,linewidth = NULL),\n    plot.caption = element_markdown(family = body_font, size = 18, color = \"#0f172a\", \n                                    hjust = 0, lineheight = 1.1, margin = margin(35,5,10,20))) +\n    labs(caption = cpt)\n## Watch out for disproportionate marker size due to difference in units (mm vs. px for plot)\nggsave(here::here(\"Scripts\",\"2024\",\"30DCC\",\"Makeover\",\"makeover_1.png\"),\n       width = 16,height = 13,device = agg_png)\n```\n:::\n\n\n\nWe get an image that's pretty close to the original.\n\n<img src=\"/Images/makeover.png\" alt=\"Replica of Michael Florent van Langren, 1644\" height=\"500\" width=\"800\"/>\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}